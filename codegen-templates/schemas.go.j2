// Code generated by generate.py. DO NOT EDIT.

package {{ package_name }}

import (
	"context"

	"github.com/hashicorp/terraform-plugin-framework/datasource/schema"
	resourceschema "github.com/hashicorp/terraform-plugin-framework/resource/schema"
	"github.com/hashicorp/terraform-plugin-framework/types"
)

{% for resource in resources %}
// {{ resource.name }} model and schemas

type {{ resource.name }}Model struct {
{% for field in resource.fields %}
{% if field.is_nested and field.is_list and field.nested_fields %}
	{{ field.name }} types.Set `tfsdk:"{{ field.tf_name }}"`
{% elif not field.is_nested %}
{% if field.is_list %}
	{{ field.name }} types.Set `tfsdk:"{{ field.tf_name }}"`
{% else %}
	{{ field.name }} types.{{ field.tf_type }} `tfsdk:"{{ field.tf_name }}"`
{% endif %}
{% endif %}
{% endfor %}
{% if resource.store_post_response %}
	Invitation types.String `tfsdk:"invitation"`
{% endif %}
{% if resource.has_groups %}
	Groups types.List `tfsdk:"groups"`
{% endif %}
}

func {{ resource.name }}ResourceSchema(ctx context.Context) resourceschema.Schema {
	return resourceschema.Schema{
		Description: "Manages a Blastshield {{ resource.tf_name }}.",
		Attributes: map[string]resourceschema.Attribute{
{% for field in resource.fields %}
{% if field.is_nested and field.is_list and field.nested_fields %}
			"{{ field.tf_name }}": resourceschema.SetNestedAttribute{
{% if field.required %}
				Required: true,
{% elif field.computed and field.optional %}
				Optional: true,
				Computed: true,
{% elif field.computed %}
				Computed: true,
{% endif %}
				NestedObject: resourceschema.NestedAttributeObject{
					Attributes: map[string]resourceschema.Attribute{
{% for nf in field.nested_fields %}
{% if nf.is_list %}
						"{{ nf.tf_name }}": resourceschema.SetAttribute{
							ElementType: {{ nf.tf_element_type }},
{% else %}
						"{{ nf.tf_name }}": resourceschema.{{ nf.tf_type }}Attribute{
{% endif %}
{% if nf.required %}
							Required: true,
{% else %}
							Optional: true,
{% endif %}
						},
{% endfor %}
					},
				},
			},
{% elif not field.is_nested %}
{% if field.is_list %}
			"{{ field.tf_name }}": resourceschema.SetAttribute{
				ElementType: {{ field.tf_element_type }},
{% elif field.is_map %}
			"{{ field.tf_name }}": resourceschema.MapAttribute{
				ElementType: {{ field.tf_element_type }},
{% else %}
			"{{ field.tf_name }}": resourceschema.{{ field.tf_type }}Attribute{
{% endif %}
{% if field.required %}
				Required: true,
{% elif field.computed and field.optional %}
				Optional: true,
				Computed: true,
{% elif field.computed %}
				Computed: true,
{% endif %}
{% if field.sensitive %}
				Sensitive: true,
{% endif %}
			},
{% endif %}
{% endfor %}
{% if resource.store_post_response %}
			"invitation": resourceschema.StringAttribute{
				Computed: true,
				Sensitive: true,
				Description: "Base64-encoded JSON of the POST response (contains registration info).",
			},
{% endif %}
{% if resource.has_groups %}
			"groups": resourceschema.ListNestedAttribute{
				Optional: true,
				Computed: true,
				Description: "Group memberships with optional expiry.",
				NestedObject: resourceschema.NestedAttributeObject{
					Attributes: map[string]resourceschema.Attribute{
						"id": resourceschema.Int64Attribute{
							Required: true,
							Description: "Group ID.",
						},
						"expires": resourceschema.Int64Attribute{
							Optional: true,
							Computed: true,
							Description: "Expiry timestamp (0 = never).",
						},
					},
				},
			},
{% endif %}
		},
	}
}

func {{ resource.name }}DataSourceSchema(ctx context.Context) schema.Schema {
	return schema.Schema{
		Description: "Fetches a Blastshield {{ resource.tf_name }} by ID.",
		Attributes: map[string]schema.Attribute{
{% for field in resource.fields %}
{% if field.is_nested and field.is_list and field.nested_fields %}
			"{{ field.tf_name }}": schema.SetNestedAttribute{
				Computed: true,
				NestedObject: schema.NestedAttributeObject{
					Attributes: map[string]schema.Attribute{
{% for nf in field.nested_fields %}
{% if nf.is_list %}
						"{{ nf.tf_name }}": schema.SetAttribute{
							ElementType: {{ nf.tf_element_type }},
							Computed: true,
						},
{% else %}
						"{{ nf.tf_name }}": schema.{{ nf.tf_type }}Attribute{
							Computed: true,
						},
{% endif %}
{% endfor %}
					},
				},
			},
{% elif not field.is_nested %}
{% if field.is_list %}
			"{{ field.tf_name }}": schema.SetAttribute{
				ElementType: {{ field.tf_element_type }},
{% elif field.is_map %}
			"{{ field.tf_name }}": schema.MapAttribute{
				ElementType: {{ field.tf_element_type }},
{% else %}
			"{{ field.tf_name }}": schema.{{ field.tf_type }}Attribute{
{% endif %}
{% if field.json_name == "id" %}
				Required: true,
{% else %}
				Computed: true,
{% endif %}
{% if field.sensitive %}
				Sensitive: true,
{% endif %}
			},
{% endif %}
{% endfor %}
{% if resource.store_post_response %}
			"invitation": schema.StringAttribute{
				Computed: true,
				Sensitive: true,
				Description: "Not available from data source (only returned on resource creation).",
			},
{% endif %}
{% if resource.has_groups %}
			"groups": schema.ListNestedAttribute{
				Computed: true,
				Description: "Group memberships with optional expiry.",
				NestedObject: schema.NestedAttributeObject{
					Attributes: map[string]schema.Attribute{
						"id": schema.Int64Attribute{
							Computed: true,
							Description: "Group ID.",
						},
						"expires": schema.Int64Attribute{
							Computed: true,
							Description: "Expiry timestamp (0 = never).",
						},
					},
				},
			},
{% endif %}
		},
	}
}

func {{ resource.plural }}DataSourceSchema(ctx context.Context) schema.Schema {
	return schema.Schema{
		Description: "Lists Blastshield {{ resource.tf_name }}s with optional filters.",
		Attributes: map[string]schema.Attribute{
{% for qp in resource.query_params %}
{% if qp.is_list %}
			"{{ qp.tf_name }}": schema.ListAttribute{
{% if qp.tf_type == "String" %}
				ElementType: types.StringType,
{% elif qp.tf_type == "Int64" %}
				ElementType: types.Int64Type,
{% endif %}
				Optional: true,
				Description: "Filter by {{ qp.tf_name }}.",
			},
{% else %}
			"{{ qp.tf_name }}": schema.{{ qp.tf_type }}Attribute{
				Optional: true,
				Description: "Filter by {{ qp.tf_name }}.",
			},
{% endif %}
{% endfor %}
			"{{ resource.tf_plural_name }}": schema.ListNestedAttribute{
				Computed: true,
				Description: "List of {{ resource.tf_plural_name }} matching the filters.",
				NestedObject: schema.NestedAttributeObject{
					Attributes: map[string]schema.Attribute{
{% for field in resource.fields %}
{% if field.is_nested and field.is_list and field.nested_fields %}
						"{{ field.tf_name }}": schema.SetNestedAttribute{
							Computed: true,
							NestedObject: schema.NestedAttributeObject{
								Attributes: map[string]schema.Attribute{
{% for nf in field.nested_fields %}
{% if nf.is_list %}
									"{{ nf.tf_name }}": schema.SetAttribute{
										ElementType: {{ nf.tf_element_type }},
										Computed: true,
									},
{% else %}
									"{{ nf.tf_name }}": schema.{{ nf.tf_type }}Attribute{
										Computed: true,
									},
{% endif %}
{% endfor %}
								},
							},
						},
{% elif not field.is_nested %}
{% if field.is_list %}
						"{{ field.tf_name }}": schema.SetAttribute{
							ElementType: {{ field.tf_element_type }},
							Computed: true,
						},
{% elif field.is_map %}
						"{{ field.tf_name }}": schema.MapAttribute{
							ElementType: {{ field.tf_element_type }},
							Computed: true,
						},
{% else %}
						"{{ field.tf_name }}": schema.{{ field.tf_type }}Attribute{
							Computed: true,
						},
{% endif %}
{% endif %}
{% endfor %}
{% if resource.store_post_response %}
						"invitation": schema.StringAttribute{
							Computed: true,
							Description: "The invitation code (only available on resource creation).",
						},
{% endif %}
{% if resource.has_groups %}
						"groups": schema.ListNestedAttribute{
							Computed: true,
							Description: "Groups this resource belongs to.",
							NestedObject: schema.NestedAttributeObject{
								Attributes: map[string]schema.Attribute{
									"id": schema.Int64Attribute{
										Computed: true,
										Description: "The group ID.",
									},
									"expires": schema.Int64Attribute{
										Computed: true,
										Description: "Unix timestamp when group membership expires.",
									},
								},
							},
						},
{% endif %}
					},
				},
			},
		},
	}
}

{% endfor %}
