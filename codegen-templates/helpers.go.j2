// Code generated by generate.py. DO NOT EDIT.

package {{ package_name }}

import (
	"context"
	"fmt"

	"github.com/hashicorp/terraform-plugin-framework/attr"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
)

{% if has_groups %}
// GroupMembershipValue is the Terraform model for group membership
type GroupMembershipValue struct {
	ID      types.Int64 `tfsdk:"id"`
	Expires types.Int64 `tfsdk:"expires"`
}

// groupMembershipAttrTypes returns the attribute types for group membership
func groupMembershipAttrTypes() map[string]attr.Type {
	return map[string]attr.Type{
		"id":      types.Int64Type,
		"expires": types.Int64Type,
	}
}

// terraformListToGroups converts a Terraform list to []GroupMembership
func terraformListToGroups(ctx context.Context, list types.List) ([]GroupMembership, error) {
	if list.IsNull() || list.IsUnknown() {
		return nil, nil
	}

	var values []GroupMembershipValue
	diags := list.ElementsAs(ctx, &values, false)
	if diags.HasError() {
		return nil, fmt.Errorf("failed to convert list elements")
	}

	result := make([]GroupMembership, len(values))
	for i, v := range values {
		result[i] = GroupMembership{
			ID:      v.ID.ValueInt64(),
			Expires: v.Expires.ValueInt64(),
		}
	}
	return result, nil
}

// groupsToTerraformList converts []GroupMembership to a Terraform list
func groupsToTerraformList(ctx context.Context, groups []GroupMembership) (types.List, diag.Diagnostics) {
	if groups == nil {
		return types.ListNull(types.ObjectType{AttrTypes: groupMembershipAttrTypes()}), nil
	}

	values := make([]GroupMembershipValue, len(groups))
	for i, g := range groups {
		values[i] = GroupMembershipValue{
			ID:      types.Int64Value(g.ID),
			Expires: types.Int64Value(g.Expires),
		}
	}

	return types.ListValueFrom(ctx, types.ObjectType{AttrTypes: groupMembershipAttrTypes()}, values)
}
{% endif %}
